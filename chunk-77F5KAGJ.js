import{a as D}from"./chunk-NZLYIASJ.js";import{c as E}from"./chunk-3GKHYPM2.js";import{a as I}from"./chunk-JX2RQWJB.js";import"./chunk-4J4J2DGP.js";import{$ as s,F as p,G as v,P as o,R as l,Ra as M,S as x,Sa as C,W as g,ga as n,ha as i,hb as y,ia as u,ib as O,j as h,la as f,ma as _,na as d,rb as w,sa as r,ta as b,ua as S}from"./chunk-57XHIBD7.js";import"./chunk-AIZVJUQQ.js";function k(t,a){if(t&1){let e=f();n(0,"div",5),r(1),n(2,"button",6),_("click",function(){p(e);let m=d();return v(m.errorMessage="")}),i()()}if(t&2){let e=d();o(),S(" ",e.errorMessage," ")}}function L(t,a){t&1&&(n(0,"div",7)(1,"div",8)(2,"span",9),r(3,"Loading..."),i()()())}function T(t,a){t&1&&(n(0,"div",25),r(1," No active orders found. "),i())}function N(t,a){if(t&1&&(n(0,"div")(1,"p",26)(2,"span",27),r(3),i(),r(4," Active Orders "),i(),n(5,"a",28),r(6," View All Orders "),i()()),t&2){let e=d(2);o(3),b(e.activeOrders.length)}}function V(t,a){t&1&&(n(0,"div",25),r(1," You are not managing any restaurants yet. "),i())}function j(t,a){if(t&1){let e=f();n(0,"div",31)(1,"div")(2,"h5",32),r(3),i(),n(4,"small"),r(5),i()(),n(6,"span")(7,"button",33),_("click",function(){p(e);let m=d(3);return v(m.startNewOrder())}),u(8,"i",34),r(9,"New Order "),i()()()}if(t&2){let e=a.$implicit;o(3),b(e.name),o(2),b(e.address)}}function A(t,a){if(t&1&&(n(0,"div",29),g(1,j,10,2,"div",30),i()),t&2){let e=d(2);o(),s("ngForOf",e.managedRestaurants)}}function F(t,a){if(t&1){let e=f();n(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"h2",14),r(5,"Quick Actions"),i(),n(6,"div",15)(7,"a",16),u(8,"i",17),r(9,"Manage Orders "),i(),n(10,"button",18),_("click",function(){p(e);let m=d();return v(m.startNewOrder())}),u(11,"i",19),r(12,"Start New Order "),i()()()()(),n(13,"div",20)(14,"div",12)(15,"div",13)(16,"h2",21),r(17,"Active Orders"),i(),g(18,T,2,0,"div",22)(19,N,7,1,"div",23),i()()(),n(20,"div",20)(21,"div",12)(22,"div",13)(23,"h2",21),r(24,"My Restaurants"),i(),g(25,V,2,0,"div",22)(26,A,2,1,"div",24),i()()()()}if(t&2){let e=d();o(18),s("ngIf",e.activeOrders.length===0),o(),s("ngIf",e.activeOrders.length>0),o(6),s("ngIf",e.managedRestaurants.length===0),o(),s("ngIf",e.managedRestaurants.length>0)}}var R=class t{constructor(a,e,c,m){this.authService=a;this.orderService=e;this.restaurantService=c;this.router=m}activeOrders=[];managedRestaurants=[];isLoading=!1;errorMessage="";ngOnInit(){if(!this.authService.isLoggedIn||!this.authService.isManager){this.router.navigate(["/"]);return}this.loadDashboardData()}loadDashboardData(){this.isLoading=!0,this.errorMessage="",h({activeOrders:this.orderService.getActiveOrders(),managedRestaurants:this.restaurantService.getManagedRestaurants()}).subscribe({next:a=>{this.activeOrders=a.activeOrders,this.managedRestaurants=a.managedRestaurants,this.isLoading=!1},error:a=>{this.isLoading=!1,this.errorMessage=a.message||"Failed to load dashboard data"}})}startNewOrder(){this.router.navigate(["/manager/order-management"])}static \u0275fac=function(e){return new(e||t)(l(w),l(E),l(D),l(y))};static \u0275cmp=x({type:t,selectors:[["app-manager-dashboard"]],decls:7,vars:3,consts:[[1,"container","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","d-flex justify-content-center my-5",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button",1,"btn-close",3,"click"],[1,"d-flex","justify-content-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"row"],[1,"col-md-12","mb-4"],[1,"card","shadow-sm"],[1,"card-body"],[1,"card-title","mb-4"],[1,"d-flex","flex-wrap","gap-3"],["routerLink","/manager/order-management",1,"btn","btn-primary"],[1,"fas","fa-utensils","me-2"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-plus-circle","me-2"],[1,"col-md-6","mb-4"],[1,"card-title","mb-3"],["class","alert alert-info",4,"ngIf"],[4,"ngIf"],["class","list-group",4,"ngIf"],[1,"alert","alert-info"],[1,"lead","mb-3"],[1,"badge","bg-success","me-2"],["routerLink","/manager/order-management",1,"btn","btn-outline-primary"],[1,"list-group"],["class","list-group-item list-group-item-action d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-center"],[1,"mb-1"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fas","fa-plus-circle","me-1"]],template:function(e,c){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Manager Dashboard"),i()(),g(4,k,3,1,"div",2)(5,L,4,0,"div",3)(6,F,27,4,"div",4),i()),e&2&&(o(4),s("ngIf",c.errorMessage),o(),s("ngIf",c.isLoading),o(),s("ngIf",!c.isLoading))},dependencies:[I,M,C,O],styles:[".card[_ngcontent-%COMP%]{transition:transform .3s,box-shadow .3s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a}.list-group-item[_ngcontent-%COMP%]{transition:background-color .2s}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}"]})};export{R as ManagerDashboardComponent};
