import{a as K}from"./chunk-NZLYIASJ.js";import{a as O,c as A,d as W,e as q,f as D,g as B,h as j,o as G,p as z,r as H,s as J}from"./chunk-4J4J2DGP.js";import{$ as g,Ba as S,Ea as E,F as u,Fa as F,G as c,P as l,R as M,Ra as V,S as C,Sa as N,W as R,Wa as I,Ya as T,ga as t,ha as n,hb as k,ia as h,ib as L,la as v,ma as p,na as m,rb as P,sa as r,ta as x,ua as w,wa as _,xa as f,ya as b}from"./chunk-57XHIBD7.js";import{a as y}from"./chunk-AIZVJUQQ.js";var U=s=>["/admin/menu-management",s];function X(s,a){if(s&1){let e=v();t(0,"div",14),r(1),t(2,"button",15),p("click",function(){u(e);let i=m();return c(i.errorMessage="")}),n()()}if(s&2){let e=m();l(),w(" ",e.errorMessage," ")}}function Y(s,a){if(s&1){let e=v();t(0,"div",16),r(1),t(2,"button",15),p("click",function(){u(e);let i=m();return c(i.successMessage="")}),n()()}if(s&2){let e=m();l(),w(" ",e.successMessage," ")}}function Z(s,a){if(s&1){let e=v();t(0,"div",17)(1,"div",18)(2,"h3"),r(3),n()(),t(4,"div",19)(5,"form",20),p("ngSubmit",function(){u(e);let i=m();return c(i.submitRestaurant())}),t(6,"div",21)(7,"label",22),r(8,"Restaurant Name*"),n(),t(9,"input",23),b("ngModelChange",function(i){u(e);let d=m();return f(d.newRestaurant.name,i)||(d.newRestaurant.name=i),c(i)}),n()(),t(10,"div",21)(11,"label",24),r(12,"Description*"),n(),t(13,"textarea",25),b("ngModelChange",function(i){u(e);let d=m();return f(d.newRestaurant.description,i)||(d.newRestaurant.description=i),c(i)}),n()(),t(14,"div",21)(15,"label",26),r(16,"Address*"),n(),t(17,"input",27),b("ngModelChange",function(i){u(e);let d=m();return f(d.newRestaurant.address,i)||(d.newRestaurant.address=i),c(i)}),n()(),t(18,"div",21)(19,"label",28),r(20,"Phone Number*"),n(),t(21,"input",29),b("ngModelChange",function(i){u(e);let d=m();return f(d.newRestaurant.phoneNumber,i)||(d.newRestaurant.phoneNumber=i),c(i)}),n()(),t(22,"div",21)(23,"label",30),r(24,"Delivery Fee ($)*"),n(),t(25,"input",31),b("ngModelChange",function(i){u(e);let d=m();return f(d.newRestaurant.deliveryFee,i)||(d.newRestaurant.deliveryFee=i),c(i)}),n()(),t(26,"div",32)(27,"button",33),r(28,"Save"),n(),t(29,"button",34),p("click",function(){u(e);let i=m();return c(i.cancelForm())}),r(30,"Cancel"),n()()()()()}if(s&2){let e=m();l(3),w("",e.isEditMode?"Edit":"Add New"," Restaurant"),l(6),_("ngModel",e.newRestaurant.name),l(4),_("ngModel",e.newRestaurant.description),l(4),_("ngModel",e.newRestaurant.address),l(4),_("ngModel",e.newRestaurant.phoneNumber),l(4),_("ngModel",e.newRestaurant.deliveryFee)}}function $(s,a){s&1&&(t(0,"div",35)(1,"div",36)(2,"span",37),r(3,"Loading..."),n()()())}function ee(s,a){if(s&1){let e=v();t(0,"tr")(1,"td"),r(2),n(),t(3,"td"),r(4),n(),t(5,"td"),r(6),n(),t(7,"td"),r(8),E(9,"currency"),n(),t(10,"td")(11,"div",41)(12,"a",42),h(13,"i",43),r(14,"Menu "),n(),t(15,"button",44),p("click",function(){let i=u(e).$implicit,d=m(2);return c(d.editRestaurant(i))}),h(16,"i",45),r(17,"Edit "),n(),t(18,"button",46),p("click",function(){let i=u(e).$implicit,d=m(2);return c(d.deleteRestaurant(i.id||""))}),h(19,"i",47),r(20,"Delete "),n()()()()}if(s&2){let e=a.$implicit;l(2),x(e.name),l(2),x(e.address),l(2),x(e.phoneNumber),l(2),x(F(9,5,e.deliveryFee)),l(4),g("routerLink",S(7,U,e.id))}}function te(s,a){if(s&1&&(t(0,"div",38)(1,"table",39)(2,"thead")(3,"tr")(4,"th"),r(5,"Name"),n(),t(6,"th"),r(7,"Address"),n(),t(8,"th"),r(9,"Phone"),n(),t(10,"th"),r(11,"Delivery Fee"),n(),t(12,"th"),r(13,"Actions"),n()()(),t(14,"tbody"),R(15,ee,21,9,"tr",40),n()()()),s&2){let e=m();l(15),g("ngForOf",e.restaurants)}}function ne(s,a){s&1&&(t(0,"div",48),r(1,' No restaurants found. Click the "Add New Restaurant" button to create one. '),n())}var Q=class s{constructor(a,e,o){this.restaurantService=a;this.authService=e;this.router=o}restaurants=[];isLoading=!1;errorMessage="";successMessage="";restaurantToEdit=null;isEditMode=!1;showForm=!1;newRestaurant={name:"",description:"",address:"",phoneNumber:"",deliveryFee:0};ngOnInit(){if(!this.authService.isLoggedIn||!this.authService.isAdmin){this.router.navigate(["/"]);return}this.loadRestaurants()}loadRestaurants(){this.isLoading=!0,this.errorMessage="",this.restaurantService.getAll().subscribe({next:a=>{this.restaurants=a,this.isLoading=!1},error:a=>{this.isLoading=!1,this.errorMessage=a.message||"Failed to load restaurants"}})}createRestaurant(){this.isEditMode=!1,this.restaurantToEdit=null,this.newRestaurant={name:"",description:"",address:"",phoneNumber:"",deliveryFee:0},this.showForm=!0}editRestaurant(a){this.isEditMode=!0,this.restaurantToEdit=a,this.newRestaurant=y({},a),this.showForm=!0}cancelForm(){this.showForm=!1,this.restaurantToEdit=null,this.errorMessage="",this.successMessage=""}submitRestaurant(){this.validateForm()&&(this.isLoading=!0,this.errorMessage="",this.successMessage="",this.isEditMode&&this.restaurantToEdit?.id?this.restaurantService.update(this.restaurantToEdit.id,this.newRestaurant).subscribe({next:()=>{this.handleSuccess("Restaurant updated successfully")},error:a=>{this.handleError(a)}}):this.restaurantService.create(this.newRestaurant).subscribe({next:()=>{this.handleSuccess("Restaurant created successfully")},error:a=>{this.handleError(a)}}))}deleteRestaurant(a){confirm("Are you sure you want to delete this restaurant? This cannot be undone.")&&(this.isLoading=!0,this.errorMessage="",this.restaurantService.delete(a).subscribe({next:()=>{this.handleSuccess("Restaurant deleted successfully")},error:e=>{this.handleError(e)}}))}validateForm(){return!this.newRestaurant.name||this.newRestaurant.name.trim()===""?(this.errorMessage="Restaurant name is required.",!1):!this.newRestaurant.description||this.newRestaurant.description.trim()===""?(this.errorMessage="Description is required.",!1):!this.newRestaurant.address||this.newRestaurant.address.trim()===""?(this.errorMessage="Address is required.",!1):!this.newRestaurant.phoneNumber||this.newRestaurant.phoneNumber.trim()===""?(this.errorMessage="Phone number is required.",!1):this.newRestaurant.deliveryFee<0?(this.errorMessage="Delivery fee cannot be negative.",!1):!0}handleSuccess(a){this.isLoading=!1,this.successMessage=a,this.loadRestaurants(),this.showForm=!1}handleError(a){this.isLoading=!1,this.errorMessage=a.message||"An error occurred while processing your request."}static \u0275fac=function(e){return new(e||s)(M(K),M(P),M(k))};static \u0275cmp=C({type:s,selectors:[["app-restaurant-management"]],decls:18,vars:6,consts:[[1,"container","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-circle","me-2"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","card mb-4",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"mt-4","mb-5"],["routerLink","/admin",1,"btn","btn-secondary"],[1,"bi","bi-arrow-left","me-2"],[1,"mb-5","pb-5"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","description",1,"form-label"],["id","description","name","description","rows","3","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","address",1,"form-label"],["type","text","id","address","name","address","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","phoneNumber",1,"form-label"],["type","text","id","phoneNumber","name","phoneNumber","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","deliveryFee",1,"form-label"],["type","number","id","deliveryFee","name","deliveryFee","min","0","step","0.01","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[4,"ngFor","ngForOf"],["role","group",1,"btn-group"],[1,"btn","btn-sm","btn-outline-primary",3,"routerLink"],[1,"bi","bi-list","me-1"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash","me-1"],[1,"alert","alert-info"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Restaurant Management"),n(),t(4,"button",2),p("click",function(){return o.createRestaurant()}),h(5,"i",3),r(6,"Add New Restaurant "),n()(),R(7,X,3,1,"div",4)(8,Y,3,1,"div",5)(9,Z,31,6,"div",6)(10,$,4,0,"div",7)(11,te,16,1,"div",8)(12,ne,2,0,"div",9),t(13,"div",10)(14,"a",11),h(15,"i",12),r(16,"Back to Dashboard "),n()(),h(17,"div",13),n()),e&2&&(l(7),g("ngIf",o.errorMessage),l(),g("ngIf",o.successMessage),l(),g("ngIf",o.showForm),l(),g("ngIf",o.isLoading),l(),g("ngIf",!o.isLoading&&o.restaurants.length),l(),g("ngIf",!o.isLoading&&!o.restaurants.length))},dependencies:[T,V,N,I,H,B,O,j,A,W,z,G,D,q,J,L],styles:[".table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:.25rem}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}.card-header[_ngcontent-%COMP%]{background-color:#f8f9fa}@media (max-width: 768px){.btn-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:0;margin-bottom:.25rem}.btn-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-bottom:0}}"]})};export{Q as RestaurantManagementComponent};
