import{a as O}from"./chunk-WM3DVCXD.js";import{a as C}from"./chunk-ZG5FP3LZ.js";import{c as A}from"./chunk-PX2FVAOA.js";import{c as I}from"./chunk-PYZGNPIL.js";import{a as w}from"./chunk-VYR3CH47.js";import"./chunk-WFRWRDGB.js";import{$ as c,Ba as x,P as a,R as l,S as h,Sa as S,W as v,ea as f,fa as g,fb as E,ga as t,gb as y,ha as e,ia as o,j as p,na as b,sa as i,ta as m,ua as u}from"./chunk-SWY4WTHZ.js";import"./chunk-AIZVJUQQ.js";var M=r=>["/restaurants",r],R=(r,n)=>n.id;function D(r,n){if(r&1&&(t(0,"div",37),i(1),e()),r&2){let s=b();a(),u(" ",s.errorMessage," ")}}function L(r,n){r&1&&(t(0,"div",38)(1,"div",39)(2,"span",40),i(3,"Loading..."),e()()())}function j(r,n){r&1&&(t(0,"tr")(1,"td",41),i(2,"No restaurants found"),e()())}function k(r,n){if(r&1&&(t(0,"tr")(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td"),i(8),e(),t(9,"td")(10,"a",42),o(11,"i",43),i(12," Start Order "),e()()()),r&2){let s=n.$implicit;a(2),m(s.name),a(2),m(s.address),a(2),m(s.phoneNumber),a(2),u("$",s.deliveryFee.toFixed(2),""),a(2),c("routerLink",x(5,M,s.id))}}var _=class r{constructor(n,s,d,F,P){this.authService=n;this.restaurantService=s;this.adminService=d;this.orderService=F;this.router=P}restaurants=[];activeOrders=[];userCount=0;isLoading=!1;errorMessage="";ngOnInit(){if(!this.authService.isLoggedIn||!this.authService.isAdmin){this.router.navigate(["/"]);return}this.loadDashboardData()}loadDashboardData(){this.isLoading=!0,this.errorMessage="",p({restaurants:this.restaurantService.getAll(),activeOrders:this.orderService.getActiveOrders(),users:this.adminService.getAllUsers()}).subscribe({next:n=>{this.restaurants=n.restaurants,this.activeOrders=n.activeOrders,this.userCount=n.users.length,this.isLoading=!1},error:n=>{this.isLoading=!1,this.errorMessage=n.message||"Failed to load dashboard data",this.loadRestaurants()}})}loadRestaurants(){this.restaurantService.getAll().subscribe({next:n=>{this.restaurants=n},error:n=>{this.errorMessage+=" Failed to load restaurants."}})}editRestaurant(n){console.log(`Edit restaurant with ID: ${n}`)}createRestaurant(){console.log("Create new restaurant")}static \u0275fac=function(s){return new(s||r)(l(I),l(C),l(O),l(A),l(E))};static \u0275cmp=h({type:r,selectors:[["app-admin-dashboard"]],decls:96,vars:6,consts:[[1,"container","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["class","alert alert-danger",4,"ngIf"],["class","text-center my-5",4,"ngIf"],[1,"row","mb-4"],[1,"col-md-6","col-lg-4","mb-4"],[1,"card","h-100","shadow-sm"],[1,"card-body"],[1,"d-flex","align-items-center","mb-3"],[1,"feature-icon","bg-primary","text-white","me-3"],[1,"fas","fa-users"],[1,"card-title","mb-0"],[1,"card-text"],["routerLink","/admin/users",1,"btn","btn-primary"],[1,"feature-icon","bg-success","text-white","me-3"],[1,"fas","fa-store"],["routerLink","/admin/restaurant-management",1,"btn","btn-success"],[1,"feature-icon","bg-info","text-white","me-3"],[1,"fas","fa-receipt"],["routerLink","/admin/order-management",1,"btn","btn-info","text-white"],[1,"card","mb-4"],[1,"card-header","bg-primary","text-white"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"fas","fa-store","me-2"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],[4,"ngIf"],[1,"row"],[1,"col-md-4","mb-4"],[1,"card","shadow-sm","bg-primary","text-white"],[1,"card-body","d-flex","justify-content-between","align-items-center"],[1,"fas","fa-store","fs-1"],[1,"card","shadow-sm","bg-success","text-white"],[1,"fas","fa-shopping-bag","fs-1"],[1,"card","shadow-sm","bg-info","text-white"],[1,"fas","fa-users","fs-1"],[1,"alert","alert-danger"],[1,"text-center","my-5"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["colspan","5",1,"text-center"],[1,"btn","btn-sm","btn-success",3,"routerLink"],[1,"fas","fa-play-circle","me-1"]],template:function(s,d){s&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Admin Dashboard"),e()(),v(4,D,2,1,"div",2)(5,L,4,0,"div",3),t(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),o(12,"i",10),e(),t(13,"h5",11),i(14,"User Management"),e()(),t(15,"p",12),i(16,"View all users and manage their roles. Upgrade users to managers or demote them as needed."),e(),t(17,"a",13),i(18,"Manage Users"),e()()()(),t(19,"div",5)(20,"div",6)(21,"div",7)(22,"div",8)(23,"div",14),o(24,"i",15),e(),t(25,"h5",11),i(26,"Restaurant Management"),e()(),t(27,"p",12),i(28,"Create, edit, and manage restaurants in the system. Control details and delivery fees."),e(),t(29,"a",16),i(30,"Manage Restaurants"),e()()()(),t(31,"div",5)(32,"div",6)(33,"div",7)(34,"div",8)(35,"div",17),o(36,"i",18),e(),t(37,"h5",11),i(38,"Order Management"),e()(),t(39,"p",12),i(40,"View active orders, close orders, and manage payment statuses for all users."),e(),t(41,"a",19),i(42,"Manage Orders"),e()()()()(),t(43,"div",20)(44,"div",21)(45,"div",22)(46,"h5",23),o(47,"i",24),i(48," Restaurants"),e()()(),t(49,"div",7)(50,"div",25)(51,"table",26)(52,"thead")(53,"tr")(54,"th"),i(55,"Name"),e(),t(56,"th"),i(57,"Address"),e(),t(58,"th"),i(59,"Phone"),e(),t(60,"th"),i(61,"Delivery Fee"),e(),t(62,"th"),i(63,"Actions"),e()()(),t(64,"tbody"),v(65,j,3,0,"tr",27),f(66,k,13,7,"tr",null,R),e()()()()(),t(68,"div",28)(69,"div",29)(70,"div",30)(71,"div",31)(72,"div")(73,"h5",11),i(74,"Restaurants"),e(),t(75,"h2",23),i(76),e()(),o(77,"i",32),e()()(),t(78,"div",29)(79,"div",33)(80,"div",31)(81,"div")(82,"h5",11),i(83,"Active Orders"),e(),t(84,"h2",23),i(85),e()(),o(86,"i",34),e()()(),t(87,"div",29)(88,"div",35)(89,"div",31)(90,"div")(91,"h5",11),i(92,"Users"),e(),t(93,"h2",23),i(94),e()(),o(95,"i",36),e()()()()()),s&2&&(a(4),c("ngIf",d.errorMessage),a(),c("ngIf",d.isLoading),a(60),c("ngIf",d.restaurants.length===0&&!d.isLoading),a(),g(d.restaurants),a(10),m(d.restaurants.length),a(9),m(d.activeOrders.length),a(9),m(d.userCount))},dependencies:[w,S,y],styles:[".feature-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:48px;height:48px;border-radius:50%;font-size:1.5rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}"]})};export{_ as AdminDashboardComponent};
